{{!--
  @generated by @igniter-js/new-cli
  @description CRUD procedure generated from the {{modelName}} Prisma model
--}}
import { igniter } from '@/igniter'
import type { Create{{modelName}}Input, Update{{modelName}}Input } from '../{{featureName}}.interfaces'

export const {{procedureExport}} = igniter.procedure({
  name: '{{procedureDisplayName}}',
  handler: async (_options, { context }) => {
    return {
      {{procedureExport}}: {
        services: {
          findAll: () => context.services.database.{{prismaDelegate}}.findMany(),
          findById: (id: {{idType}}) => context.services.database.{{prismaDelegate}}.findUnique({ where: { id } }),
          create: (data: Create{{modelName}}Input) => context.services.database.{{prismaDelegate}}.create({ data }),
          update: (id: {{idType}}, data: Update{{modelName}}Input) => context.services.database.{{prismaDelegate}}.update({ where: { id }, data }),
          delete: (id: {{idType}}) => context.services.database.{{prismaDelegate}}.delete({ where: { id } }),
        }
      }
    }
  }
})
